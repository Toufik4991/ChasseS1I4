<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Pendu Hardcore - Borne Incendie</title>
    <style>
        :root {
            --primary: #ff4400;
            --bg: #050505;
        }

        body {
            margin: 0;
            padding: 10px;
            background: var(--bg);
            color: white;
            font-family: 'Segoe UI', Roboto, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            touch-action: manipulation;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 400px;
            font-weight: bold;
            color: var(--primary);
            text-transform: uppercase;
            font-size: 13px;
        }

        #timer { color: #fff; background: var(--primary); padding: 2px 8px; border-radius: 4px; }

        canvas {
            background: #111;
            border-radius: 15px;
            border: 2px solid #222;
            margin: 10px 0;
            max-height: 20vh;
            width: auto;
        }

        #wordDisplay {
            font-size: 26px; /* Plus petit pour mobile car mot long */
            font-weight: 800;
            letter-spacing: 4px;
            margin: 15px 0;
            min-height: 40px;
            text-align: center;
            color: #00ff88;
            text-transform: uppercase;
        }

        #keyboard {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 4px;
            width: 100%;
            max-width: 500px;
            margin-top: auto;
            padding-bottom: 20px;
        }

        .key {
            background: #222;
            color: white;
            border: 1px solid #333;
            border-radius: 5px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }

        .key.correct { background: #00ff88 !important; color: black; border-color: #00ff88; }
        .key.wrong { background: #ff4400 !important; opacity: 0.2; border-color: transparent; }
        .key.used { pointer-events: none; }

        #msg {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(5,5,5,0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            display: none;
            border: 2px solid var(--primary);
            z-index: 100;
            width: 80%;
        }

        .shake { animation: shake 0.3s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }
    </style>
</head>
<body>

    <div class="stats">
        <div>VIE: <span id="tries">6</span></div>
        <div id="timer-box">VITE: <span id="timer">10</span>s</div>
    </div>

    <canvas id="hangman" width="200" height="200"></canvas>

    <div id="wordDisplay"></div>

    <div id="keyboard"></div>

    <div id="msg">
        <h2 id="msgTitle" style="color: var(--primary); font-size: 30px; margin: 0;"></h2>
        <p id="msgSub" style="font-size: 18px; margin: 15px 0;"></p>
        <button onclick="location.reload()" style="padding: 12px 25px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: bold; font-size: 16px;">RECOMMENCER</button>
    </div>

<script>
    const phrase = "BORNE-INCENDIE";
    let guessed = [];
    // Initialisation avec le tiret dÃ©jÃ  visible
    for(let char of phrase) {
        guessed.push(char === "-" ? "-" : "_");
    }

    let wrongCount = 0;
    const maxWrong = 6;
    let timeLeft = 10;
    let gameActive = true;
    let timerInterval;

    const canvas = document.getElementById("hangman");
    const ctx = canvas.getContext("2d");
    const wordDisplay = document.getElementById("wordDisplay");
    const keyboard = document.getElementById("keyboard");
    const triesDisplay = document.getElementById("tries");
    const timerDisplay = document.getElementById("timer");

    const layout = "AZERTYUIOPQSDFGHJKLMWXCVBN";

    function init() {
        layout.split("").forEach(letter => {
            const btn = document.createElement("div");
            btn.className = "key";
            btn.textContent = letter;
            btn.onclick = () => handleGuess(letter, btn);
            keyboard.appendChild(btn);
        });

        updateUI();
        draw(0);
        startTimer();
    }

    function startTimer() {
        clearInterval(timerInterval);
        timeLeft = 10;
        timerDisplay.textContent = timeLeft;
        timerInterval = setInterval(() => {
            timeLeft--;
            timerDisplay.textContent = timeLeft;
            if (timeLeft <= 0) {
                handleWrong(); 
            }
        }, 1000);
    }

    function handleGuess(letter, btn) {
        if (!gameActive || btn.classList.contains("used")) return;
        
        btn.classList.add("used");
        let found = false;

        for (let i = 0; i < phrase.length; i++) {
            if (phrase[i] === letter) {
                guessed[i] = letter;
                found = true;
            }
        }

        if (found) {
            btn.classList.add("correct");
            if (!guessed.includes("_")) win();
            else startTimer();
        } else {
            btn.classList.add("wrong");
            handleWrong();
        }
        updateUI();
    }

    function handleWrong() {
        wrongCount++;
        canvas.classList.add("shake");
        setTimeout(() => canvas.classList.remove("shake"), 300);
        
        draw(wrongCount);
        if (wrongCount >= maxWrong) lose();
        else startTimer();
        updateUI();
    }

    function updateUI() {
        wordDisplay.textContent = guessed.join(" ");
        triesDisplay.textContent = maxWrong - wrongCount;
    }

    function draw(stage) {
        ctx.strokeStyle = "white";
        ctx.lineWidth = 5;
        ctx.lineCap = "round";
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        ctx.beginPath();
        if (stage > 0) { ctx.moveTo(20, 180); ctx.lineTo(180, 180); } 
        if (stage > 1) { ctx.moveTo(50, 180); ctx.lineTo(50, 20); ctx.lineTo(130, 20); ctx.lineTo(130, 40); } 
        if (stage > 2) { ctx.stroke(); ctx.beginPath(); ctx.arc(130, 55, 15, 0, Math.PI * 2); } 
        if (stage > 3) { ctx.moveTo(130, 70); ctx.lineTo(130, 120); } 
        if (stage > 4) { ctx.moveTo(130, 80); ctx.lineTo(100, 100); ctx.moveTo(130, 80); ctx.lineTo(160, 100); } 
        if (stage > 5) { ctx.moveTo(130, 120); ctx.lineTo(100, 160); ctx.moveTo(130, 120); ctx.lineTo(160, 160); } 
        ctx.stroke();
    }

    function win() {
        gameActive = false;
        clearInterval(timerInterval);
        showMsg("AU FEUUU ! ðŸ”¥", "Borne trouvÃ©e ! ðŸ˜º");
    }

    function lose() {
        gameActive = false;
        clearInterval(timerInterval);
        showMsg("BRÃ›LÃ‰... ðŸ’€", "C'Ã©tait : BORNE-INCENDIE");
    }

    function showMsg(title, sub) {
        const m = document.getElementById("msg");
        m.style.display = "block";
        document.getElementById("msgTitle").textContent = title;
        document.getElementById("msgSub").textContent = sub;
    }

    init();
</script>
</body>
</html>
